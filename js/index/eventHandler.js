var EventHandler_module=function(t){function e(t){this.app=t}return e.prototype.init=function(){var e=this;this.navbarOpen=!1,t(".nav-toggle").click(this.toggleNav.bind(this)),t(document).click(this.hiddeNav.bind(this)),t("nav ul li a").click(function(a){a.preventDefault();var n=t(this).attr("href");history.pushState(null,null,n),e.scrollToElement(n)});var a=t("#gallery-carousel");a.owlCarousel({stagePadding:50,margin:10,autoplay:!0,autoplayTimeout:7e3,autoplayHoverPause:!0,loop:!0,responsive:{0:{items:1},700:{items:2},1600:{items:3}}}),a.on("mousewheel",".owl-stage",function(t){t.originalEvent.deltaY>0?a.trigger("next.owl"):a.trigger("prev.owl"),t.preventDefault()});var n=t(".book-container > div.bk-book");n.each(function(){var e=t(this),a=n.not(e),i=e.parent(),o=e.children("div.bk-page"),s=i.find("button.bk-bookview"),l=o.children("div.bk-content"),r=0;if(i.find("button.bk-bookback").on("click",function(){s.removeClass("bk-active"),e.data("flip")?e.data({opened:!1,flip:!1}).removeClass("bk-viewback").addClass("bk-bookdefault"):e.data({opened:!1,flip:!0}).removeClass("bk-viewinside bk-bookdefault").addClass("bk-viewback")}),s.on("click",function(){var n=t(this);a.data("opened",!1).removeClass("bk-viewinside").parent().css("z-index",0).find("button.bk-bookview").removeClass("bk-active"),a.hasClass("bk-viewback")||a.addClass("bk-bookdefault"),e.data("opened")?(n.removeClass("bk-active"),e.data({opened:!1,flip:!1}).removeClass("bk-viewinside").addClass("bk-bookdefault")):(n.addClass("bk-active"),e.data({opened:!0,flip:!1}).removeClass("bk-viewback bk-bookdefault").addClass("bk-viewinside"),r=0,l.removeClass("bk-content-current").eq(r).addClass("bk-content-current"))}),l.length>1){var c=t('<span class="bk-page-prev">&lt;</span>'),p=t('<span class="bk-page-next">&gt;</span>');o.append(t("<nav></nav>").append(c,p)),c.on("click",function(){return r>0&&(--r,l.removeClass("bk-content-current").eq(r).addClass("bk-content-current")),!1}),p.on("click",function(){return r<l.length-1&&(++r,l.removeClass("bk-content-current").eq(r).addClass("bk-content-current")),!1})}}),t(".book-1").click(function(){window.location.replace("/kniha")}),t("#contact-form > input").each(function(){if("_gotcha"!==t(this).attr("name")&&"_next"!==t(this).attr("name")){var e=t(this).attr("value");t(this).wrap('<div class="field-wrap"></div>'),t(this).after('<div class="field-value">'+e+"</div>"),t(this).val(""),t(this).on("input",function(){var a=t(this).val();a.length>0?t(this).next(".field-value").html(a):t(this).next(".field-value").html(e)}),t(this).on("focusout",function(){t(this).parent().removeClass("flip")}),t(this).parent().on("click",function(e){t(this).addClass("flip"),t(this).find("input").focus()})}});var i=t("textarea").html();t("textarea").html("").val(i),t(document).on("focus","textarea",function(e){t(this).val()===i&&t(this).val("")}),t(document).on("blur","textarea",function(e){""===t(this).val()&&t(this).val(i)}),t(document).keydown(function(e){if(9==e.keyCode){var a=t("input, textarea"),n=a.length,i=a.index(e.target),o=0;e.shiftKey?(o=i-1)<=0&&(o=n-1):(o=i+1)>=n&&(o=0),a.eq(o).click()}}),t(".article-back-btn").click(function(){e.app.gui.closeArticle()}),t(".contact_submit").click(function(t){t.preventDefault(),e.submitForm()})},e.prototype.scrollToElement=function(e){var a=parseInt(t(".headspacer").css("margin-bottom").replace(/[A-Za-z]/,""))-150;t("html,body").animate({scrollTop:t(e).offset().top-a},{easing:"easeOutExpo"},1e3)},e.prototype.toggleNav=function(){this.navbarOpen?(this.navbarOpen=!1,this.app.gui.hideNav()):(this.navbarOpen=!0,this.app.gui.showNav())},e.prototype.hiddeNav=function(e){var a=t(".nav-toggle"),n=t(e.target);e.target!=a.get(0)&&0===a.find(n).length&&(this.navbarOpen=!1,this.app.gui.hideNav())},e.prototype.submitForm=function(e){var a=this;t(".contact-msg-row > div").alert("close");var n={"Jméno":"#contact-form input[name=name]",_replyto:"#contact-form input[name=_replyto]","Zpráva":"#contact-form textarea",_gotcha:"#contact-form input[name=_gotcha]"},i={};for(var o in n){var s=t(n[o]).val();if("_gotcha"!==o&&""===s||"Zpráva"===o&&"Zpráva:"===s)return void a.app.gui.showSendError("missing value");i[o]=s}t.ajax("http://formspree.io/mandulova@gmail.com",{cache:!1,data:i,dataType:"json",method:"POST",success:function(t){"email sent"==t.success&&a.app.gui.showThanks()}})},e.prototype.registerArticles=function(){var e=this;t(".article").click(function(){e.scrollToElement("#Clanky"),e.app.gui.openArticle(t(this).index(".article"))})},e}($);