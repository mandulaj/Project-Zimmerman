var EventHandler_module=function(l){"use strict";function t(t){this.app=t}return t.prototype.init=function(){var a=this;this.navbarOpen=!1,l(".nav-toggle").click(this.toggleNav.bind(this)),l(document).click(this.hiddeNav.bind(this)),l("nav ul li a").click(function(t){t.preventDefault();t=l(this).attr("href");history.pushState(null,null,t),a.scrollToElement(t)}),l("#gallery-carousel").owlCarousel({stagePadding:50,margin:10,nav:!0,navText:['<span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>','<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>'],autoplay:!0,autoplayTimeout:7e3,autoplayHoverPause:!0,loop:!0,responsive:{0:{items:1},700:{items:1},1600:{items:2}}});var c=l(".book-container > div.bk-book");c.each(function(){var t,a=l(this),e=c.not(a),n=a.parent(),i=a.children("div.bk-page"),o=n.find("button.bk-bookview"),s=i.children("div.bk-content"),r=0;n.find("button.bk-bookback").on("click",function(){o.removeClass("bk-active"),a.data("flip")?a.data({opened:!1,flip:!1}).removeClass("bk-viewback").addClass("bk-bookdefault"):a.data({opened:!1,flip:!0}).removeClass("bk-viewinside bk-bookdefault").addClass("bk-viewback")}),o.on("click",function(){var t=l(this);e.data("opened",!1).removeClass("bk-viewinside").parent().css("z-index",0).find("button.bk-bookview").removeClass("bk-active"),e.hasClass("bk-viewback")||e.addClass("bk-bookdefault"),a.data("opened")?(t.removeClass("bk-active"),a.data({opened:!1,flip:!1}).removeClass("bk-viewinside").addClass("bk-bookdefault")):(t.addClass("bk-active"),a.data({opened:!0,flip:!1}).removeClass("bk-viewback bk-bookdefault").addClass("bk-viewinside"),r=0,s.removeClass("bk-content-current").eq(r).addClass("bk-content-current"))}),1<s.length&&(t=l('<span class="bk-page-prev">&lt;</span>'),n=l('<span class="bk-page-next">&gt;</span>'),i.append(l("<nav></nav>").append(t,n)),t.on("click",function(){return 0<r&&(--r,s.removeClass("bk-content-current").eq(r).addClass("bk-content-current")),!1}),n.on("click",function(){return r<s.length-1&&(++r,s.removeClass("bk-content-current").eq(r).addClass("bk-content-current")),!1}))}),l(".book-1").click(function(){window.location.replace("/kniha")}),l("#contact-form > input").each(function(){var a;"_gotcha"!==l(this).attr("name")&&"_next"!==l(this).attr("name")&&(a=l(this).attr("value"),l(this).wrap('<div class="field-wrap"></div>'),l(this).after('<div class="field-value">'+a+"</div>"),l(this).val(""),l(this).on("input",function(){var t=l(this).val();0<t.length?l(this).next(".field-value").html(t):l(this).next(".field-value").html(a)}),l(this).on("focusout",function(){l(this).parent().removeClass("flip")}),l(this).parent().on("click",function(t){l(this).addClass("flip"),l(this).find("input").focus()}))});var e=l("textarea").html();l("textarea").html("").val(e),l(document).on("focus","textarea",function(t){l(this).val()===e&&l(this).val("")}),l(document).on("blur","textarea",function(t){""===l(this).val()&&l(this).val(e)}),l(document).keydown(function(t){var a,e,n,i;9==t.keyCode&&(e=(a=l("input, textarea")).length,n=a.index(t.target),i=0,t.shiftKey?(i=n-1)<=0&&(i=e-1):e<=(i=n+1)&&(i=0),a.eq(i).click())}),l(".article-back-btn").click(function(){a.app.gui.closeArticle()}),l(".contact_submit").click(function(t){t.preventDefault(),a.submitForm()})},t.prototype.scrollToElement=function(t){var a=parseInt(l(".headspacer").css("margin-bottom").replace(/[A-Za-z]/,""))-150;l("html,body").animate({scrollTop:l(t).offset().top-a},{easing:"easeOutExpo"},1e3)},t.prototype.toggleNav=function(){this.navbarOpen?(this.navbarOpen=!1,this.app.gui.hideNav()):(this.navbarOpen=!0,this.app.gui.showNav())},t.prototype.hiddeNav=function(t){var a=l(".nav-toggle"),e=l(t.target);t.target!=a.get(0)&&0===a.find(e).length&&(this.navbarOpen=!1,this.app.gui.hideNav())},t.prototype.submitForm=function(t){var a=this;l(".contact-msg-row > div").alert("close");var e,n={"Jméno":"#contact-form input[name=name]",_replyto:"#contact-form input[name=_replyto]","Zpráva":"#contact-form textarea",_gotcha:"#contact-form input[name=_gotcha]"},i={};for(e in n){var o=l(n[e]).val();if("_gotcha"!==e&&""===o||"Zpráva"===e&&"Zpráva:"===o)return void a.app.gui.showSendError("missing value");i[e]=o}l.ajax("https://formspree.io/jakub.aludnam@gmail.com",{cache:!1,data:i,dataType:"json",method:"POST",success:function(t){console.log(t),t.ok&&a.app.gui.showThanks()},error:function(t){a.app.gui.showSendError("missing value")}})},t.prototype.registerArticles=function(){var t=this;l(".article").click(function(){t.scrollToElement("#Clanky"),t.app.gui.openArticle(l(this).index(".article"))})},t}($);