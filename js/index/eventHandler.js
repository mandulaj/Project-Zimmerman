var EventHandler_module=function(t){function a(t){this.app=t}return a.prototype.init=function(){var a=this;this.navbarOpen=!1,t(".nav-toggle").click(this.toggleNav.bind(this)),t(document).click(this.hiddeNav.bind(this)),t("nav ul li a").click(function(e){e.preventDefault();var n=t(this).attr("href");history.pushState(null,null,n),a.scrollToElement(n)}),t("#gallery-carousel").owlCarousel({stagePadding:50,margin:10,nav:!0,navText:['<span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>','<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>'],autoplay:!0,autoplayTimeout:7e3,autoplayHoverPause:!0,loop:!0,responsive:{0:{items:1},700:{items:1},1600:{items:2}}});var e=t(".book-container > div.bk-book");e.each(function(){var a=t(this),n=e.not(a),i=a.parent(),o=a.children("div.bk-page"),s=i.find("button.bk-bookview"),l=o.children("div.bk-content"),c=0;if(i.find("button.bk-bookback").on("click",function(){s.removeClass("bk-active"),a.data("flip")?a.data({opened:!1,flip:!1}).removeClass("bk-viewback").addClass("bk-bookdefault"):a.data({opened:!1,flip:!0}).removeClass("bk-viewinside bk-bookdefault").addClass("bk-viewback")}),s.on("click",function(){var e=t(this);n.data("opened",!1).removeClass("bk-viewinside").parent().css("z-index",0).find("button.bk-bookview").removeClass("bk-active"),n.hasClass("bk-viewback")||n.addClass("bk-bookdefault"),a.data("opened")?(e.removeClass("bk-active"),a.data({opened:!1,flip:!1}).removeClass("bk-viewinside").addClass("bk-bookdefault")):(e.addClass("bk-active"),a.data({opened:!0,flip:!1}).removeClass("bk-viewback bk-bookdefault").addClass("bk-viewinside"),c=0,l.removeClass("bk-content-current").eq(c).addClass("bk-content-current"))}),l.length>1){var r=t('<span class="bk-page-prev">&lt;</span>'),p=t('<span class="bk-page-next">&gt;</span>');o.append(t("<nav></nav>").append(r,p)),r.on("click",function(){return c>0&&(--c,l.removeClass("bk-content-current").eq(c).addClass("bk-content-current")),!1}),p.on("click",function(){return c<l.length-1&&(++c,l.removeClass("bk-content-current").eq(c).addClass("bk-content-current")),!1})}}),t(".book-1").click(function(){window.location.replace("/kniha")}),t("#contact-form > input").each(function(){if("_gotcha"!==t(this).attr("name")&&"_next"!==t(this).attr("name")){var a=t(this).attr("value");t(this).wrap('<div class="field-wrap"></div>'),t(this).after('<div class="field-value">'+a+"</div>"),t(this).val(""),t(this).on("input",function(){var e=t(this).val();e.length>0?t(this).next(".field-value").html(e):t(this).next(".field-value").html(a)}),t(this).on("focusout",function(){t(this).parent().removeClass("flip")}),t(this).parent().on("click",function(a){t(this).addClass("flip"),t(this).find("input").focus()})}});var n=t("textarea").html();t("textarea").html("").val(n),t(document).on("focus","textarea",function(a){t(this).val()===n&&t(this).val("")}),t(document).on("blur","textarea",function(a){""===t(this).val()&&t(this).val(n)}),t(document).keydown(function(a){if(9==a.keyCode){var e=t("input, textarea"),n=e.length,i=e.index(a.target),o=0;a.shiftKey?(o=i-1)<=0&&(o=n-1):(o=i+1)>=n&&(o=0),e.eq(o).click()}}),t(".article-back-btn").click(function(){a.app.gui.closeArticle()}),t(".contact_submit").click(function(t){t.preventDefault(),a.submitForm()}),t("#akceLink").click(function(t){t.preventDefault(),a.app.gui.openArticle(0),a.app.handler.scrollToElement("#Clanky")})},a.prototype.scrollToElement=function(a){var e=parseInt(t(".headspacer").css("margin-bottom").replace(/[A-Za-z]/,""))-150;t("html,body").animate({scrollTop:t(a).offset().top-e},{easing:"easeOutExpo"},1e3)},a.prototype.toggleNav=function(){this.navbarOpen?(this.navbarOpen=!1,this.app.gui.hideNav()):(this.navbarOpen=!0,this.app.gui.showNav())},a.prototype.hiddeNav=function(a){var e=t(".nav-toggle"),n=t(a.target);a.target!=e.get(0)&&0===e.find(n).length&&(this.navbarOpen=!1,this.app.gui.hideNav())},a.prototype.submitForm=function(a){var e=this;t(".contact-msg-row > div").alert("close");var n={"Jméno":"#contact-form input[name=name]",_replyto:"#contact-form input[name=_replyto]","Zpráva":"#contact-form textarea",_gotcha:"#contact-form input[name=_gotcha]"},i={};for(var o in n){var s=t(n[o]).val();if("_gotcha"!==o&&""===s||"Zpráva"===o&&"Zpráva:"===s)return void e.app.gui.showSendError("missing value");i[o]=s}t.ajax("http://formspree.io/mandulova@gmail.com",{cache:!1,data:i,dataType:"json",method:"POST",success:function(t){"email sent"==t.success&&e.app.gui.showThanks()}})},a.prototype.registerArticles=function(){var a=this;t(".article").click(function(){a.scrollToElement("#Clanky"),a.app.gui.openArticle(t(this).index(".article"))})},a}($);